# FEATURE: レイアウトモジュールによるページ構造の自己進化

**Status:** CLOSED ✅  
**Date:** 2026-01-14  
**Type:** Feature Enhancement

## 概要

ページ全体の自己進化機能を実装。従来のカラーテーマ生成に加え、ページのレイアウト（構造・配置・アニメーション）をAIが毎回生成するようになった。

## 背景

- 従来はカラーバリエーション（テーマ）と機能追加のみが進化の対象だった
- ページ構造自体は `TEMPLATE.html` で固定されていた
- ユーザーからの要望：「ページ自体の自己進化がほしい」

## 実装内容

### 新規ファイル

- `public/layouts/layouts.json` - レイアウトのメタデータ管理
- `public/layouts/default.css` - デフォルトレイアウト（クラシック）
- `public/features/core/layout-loader.js` - レイアウトを動的に読み込むローダー

### 変更ファイル

- `scripts/generator.py`
  - `generate_new_layout()` 関数を追加
  - AIモードでレイアウト生成を呼び出し
  - `generate_archive_html()` に `new_layout` 引数を追加
  - 履歴にレイアウト情報を記録
- `public/archives/TEMPLATE.html`
  - レイアウトCSS読み込みを追加
  - `layout-loader.js` スクリプト読み込みを追加
  - 進化ログに「新レイアウト」を追加

## アーキテクチャ

```
┌─────────────────────────────────────────────────┐
│                 自己進化要素                      │
├─────────────────────────────────────────────────┤
│  🎨 テーマ（色）     → styles/themes/*.css      │
│  📐 レイアウト（構造） → layouts/*.css          │
│  ⚙️ 機能（JS）        → features/modules/*.js   │
└─────────────────────────────────────────────────┘
```

### レイアウトで変更可能な要素

1. ニュースカードの配置（リスト、グリッド、マソンリー、カルーセル風など）
2. カードの形状・サイズ比率
3. アニメーション効果（フェード、スライド、スケール、回転など）
4. ナンバリングバッジのスタイル
5. ホバーエフェクト
6. レスポンシブブレークポイントでの挙動

### 禁止事項（レイアウトCSS）

- 色の直接指定は禁止
- 代わりにCSS変数を使用（`var(--morpho-accent-primary)` など）

## 解決日

2026-01-14
