# MorphoNews 改善履歴

## ✅ 完了: MorphoNews機能強化 (2026-01-07)

### 実装した機能

#### 1. 履歴一覧ページ (`history.html`)

- 過去の全ニュースをカード形式で一覧表示
- 日付、mood、サマリーを表示
- 各アーカイブHTMLおよびJSONデータへのリンク
- モダンなUI（グラデーション、ホバーエフェクト、アニメーション）

#### 2. 詳細メタデータの記録 (`generator.py`)

- **JSTタイムゾーン**: 明示的に日本時間を設定し、表示
- **AIプロンプト全文**: 要約AI・デザインAIそれぞれのプロンプトを保存
- **トークン数詳細**: 入力/出力/合計のトークン数を記録
  - 要約AIトークン
  - デザインAIトークン
  - 合計トークン
- **使用モデル名**: 生成に使用したGemini AIモデル名を記録
- **処理時間**: 各ステップおよび全体の処理時間（秒）を記録

#### 3. 履歴JSON形式の改善 (`history.json`)

- 旧形式（IDリスト）から新形式（詳細データ付き辞書）に変更
- 後方互換性を維持（旧形式も自動マイグレーション）

#### 4. アーカイブHTMLへの情報表示

- ナビゲーションバー（前のアップデート、アーカイブ一覧へのリンク）
- フッターに生成統計を詳細表示
- `<details>`タグでプロンプト全文を折りたたみ表示

### 変更ファイル一覧

- `scripts/generator.py` - メイン生成スクリプトを大幅改良
- `scripts/migrate_history.py` - マイグレーションスクリプト（新規）
- `public/history.html` - 履歴一覧ページ（新規）
- `public/history.json` - 新形式への移行
- `README.md` - 新機能の説明を追加

---

## 📋 今後の改善候補

### 1. 検索・フィルター機能

- mood別フィルタリング
- 日付範囲での絞り込み
- キーワード検索

### 2. RSS配信

- history.jsonからRSSフィードを自動生成
- ユーザーがRSSリーダーで購読可能に

### 3. ダークモード/ライトモード切り替え

- ユーザー設定の保存

### 4. パフォーマンス最適化

- 履歴ページのページネーション
- 画像の遅延読み込み

### 5. 多言語対応

- 英語版の自動生成
