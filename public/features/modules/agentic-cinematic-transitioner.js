/**
 * MorphoNews Feature: エージェンティック・シネマティック・トランジショナー
 * Generated: 2026-01-18_0013
 * Description: サイト内の大規模なコンテンツ変化やセクションの切り替えを検知し、映画のようなフェードとブラーを用いた滑らかな視覚的遷移を自動で演出します。情報の断片的な変化を流動的な体験へと統合します。
 */
(function() { const style = document.createElement('style'); style.textContent = ` #morpho-transition-layer { position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 1000000; background: radial-gradient(circle, rgba(255,255,255,0) 0%, rgba(0,0,0,0.2) 100%); opacity: 0; transition: opacity 0.8s cubic-bezier(0.22, 1, 0.36, 1); } .morpho-transitioning { filter: blur(4px) grayscale(0.2); transition: filter 0.8s cubic-bezier(0.22, 1, 0.36, 1); } .morpho-flash { position: fixed; top: 0; left: 0; width: 100%; height: 2px; background: linear-gradient(90deg, transparent, #007bff, transparent); z-index: 1000001; animation: morpho-scan 0.8s ease-in-out forwards; } @keyframes morpho-scan { 0% { top: 0; opacity: 0; } 50% { opacity: 1; } 100% { top: 100%; opacity: 0; } } `; document.head.appendChild(style); const transitionLayer = document.createElement('div'); transitionLayer.id = 'morpho-transition-layer'; document.body.appendChild(transitionLayer); function executeTransition() { transitionLayer.style.opacity = '1'; document.body.classList.add('morpho-transitioning'); const flash = document.createElement('div'); flash.className = 'morpho-flash'; document.body.appendChild(flash); setTimeout(() => { transitionLayer.style.opacity = '0'; document.body.classList.remove('morpho-transitioning'); setTimeout(() => flash.remove(), 800); }, 600); } let lastMutationTime = Date.now(); const observer = new MutationObserver((mutations) => { const now = Date.now(); if (now - lastMutationTime < 2000) return; let heavyChange = false; mutations.forEach(m => { if (m.addedNodes.length > 3 || (m.target.innerText && m.target.innerText.length > 100)) { heavyChange = true; } }); if (heavyChange) { lastMutationTime = now; executeTransition(); } }); observer.observe(document.body, { childList: true, subtree: true, characterData: true }); window.addEventListener('popstate', executeTransition); window.addEventListener('hashchange', executeTransition); console.log('Agentic Cinematic Transitioner initialized. Capturing evolutionary moments.'); })();
