/**
 * MorphoNews Feature: インサイト・シンセサイザー（エージェント型要約）
 * Generated: 2026-01-13_0118
 * Description: 閲覧中のコンテンツを自律的に解析し、重要なトピックやアクションアイテムを抽出した「ミッションブリーフ」をリアルタイムで生成します。
 */
(function() { const style = document.createElement('style'); style.textContent = ` #insight-synthesizer { position: fixed; bottom: 20px; right: 20px; width: 280px; background: rgba(15, 23, 42, 0.95); color: #f1f5f9; border: 1px solid #334155; border-radius: 12px; padding: 16px; font-family: sans-serif; box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.4); z-index: 10000; transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275); font-size: 13px; backdrop-filter: blur(10px); } #insight-synthesizer header { font-weight: bold; margin-bottom: 12px; display: flex; align-items: center; gap: 8px; color: #38bdf8; border-bottom: 1px solid #334155; padding-bottom: 8px; } #insight-synthesizer .status-dot { width: 8px; height: 8px; background: #22c55e; border-radius: 50%; animation: agent-pulse 2s infinite; } #insight-list { list-style: none; padding: 0; margin: 0; } #insight-list li { margin-bottom: 10px; padding-left: 10px; border-left: 2px solid #38bdf8; line-height: 1.5; color: #cbd5e1; } @keyframes agent-pulse { 0% { opacity: 0.4; transform: scale(0.9); } 50% { opacity: 1; transform: scale(1.1); } 100% { opacity: 0.4; transform: scale(0.9); } } `; document.head.appendChild(style); const container = document.createElement('div'); container.id = 'insight-synthesizer'; container.innerHTML = '<header><div class="status-dot"></div>AGENTIC INSIGHT</header><ul id="insight-list">分析中...</ul>'; document.body.appendChild(container); function extractKeyPhrases() { const bodyText = document.body.innerText; const sentences = bodyText.split(/[。\n.!?]/).filter(s => s.trim().length > 15 && s.trim().length < 100); const sorted = sentences.sort((a, b) => { const aScore = (a.match(/[0-9]|重要|発表|開始|決定|最大/g) || []).length; const bScore = (b.match(/[0-9]|重要|発表|開始|決定|最大/g) || []).length; return bScore - aScore; }); return [...new Set(sorted)].slice(0, 3); } function updateSynthesizer() { const list = document.getElementById('insight-list'); const insights = extractKeyPhrases(); if (insights.length > 0) { list.innerHTML = insights.map(text => `<li>${text.trim()}</li>`).join(''); } else { list.innerHTML = '<li>情報を収集中...</li>'; } } let scrollTimeout; window.addEventListener('scroll', () => { clearTimeout(scrollTimeout); scrollTimeout = setTimeout(updateSynthesizer, 1500); }); setTimeout(updateSynthesizer, 500); })();
