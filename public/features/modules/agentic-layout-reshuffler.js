/**
 * MorphoNews Feature: エージェンティック・レイアウト・リシャッフラー
 * Generated: 2026-01-15_1719
 * Description: 「Reshuffle」のムードに基づき、ニュース項目の視覚的優先順位を物理的に並び替えることで、情報の定型化による認識のバイアスを打破し、新たな発見を促す空間再構成機能。
 */
(function() { const style = document.createElement('style'); style.textContent = ` #morpho-reshuffle-fab { position: fixed; bottom: 30px; left: 30px; width: 56px; height: 56px; border-radius: 28px; background: linear-gradient(135deg, #6e8efb, #a777e3); color: white; border: none; cursor: pointer; display: flex; align-items: center; justify-content: center; box-shadow: 0 4px 15px rgba(0,0,0,0.2); z-index: 10000; transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); font-size: 24px; } #morpho-reshuffle-fab:hover { transform: scale(1.1) rotate(90deg); box-shadow: 0 6px 20px rgba(0,0,0,0.3); } #morpho-reshuffle-fab:active { transform: scale(0.9); } .reshuffle-transition { transition: transform 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55), opacity 0.4s ease; } `; document.head.appendChild(style); const fab = document.createElement('button'); fab.id = 'morpho-reshuffle-fab'; fab.innerHTML = '⇄'; fab.title = 'Reshuffle Perspective'; document.body.appendChild(fab); const shuffleElements = (parent) => { const children = Array.from(parent.children).filter(el => { const style = window.getComputedStyle(el); return style.display !== 'none' && !['SCRIPT', 'STYLE', 'BUTTON', 'NAV'].includes(el.tagName); }); if (children.length < 2) return; children.forEach(el => { const rect = el.getBoundingClientRect(); el.dataset.oldTop = rect.top; el.dataset.oldLeft = rect.left; el.classList.add('reshuffle-transition'); }); for (let i = children.length - 1; i > 0; i--) { const j = Math.floor(Math.random() * (i + 1)); parent.insertBefore(children[i], children[j]); } setTimeout(() => { children.forEach(el => el.classList.remove('reshuffle-transition')); }, 600); }; fab.addEventListener('click', () => { const mainContainers = document.querySelectorAll('main, [role="main"], .news-container, #content'); if (mainContainers.length > 0) { mainContainers.forEach(container => shuffleElements(container)); } else { const bodyChildren = document.body.children; const potentialContainers = Array.from(bodyChildren).filter(el => el.tagName === 'DIV' && el.children.length > 2); if (potentialContainers.length > 0) { shuffleElements(potentialContainers[0]); } else { shuffleElements(document.body); } } const notification = document.createElement('div'); notification.style = 'position:fixed; top:20px; left:50%; transform:translateX(-50%); background:rgba(0,0,0,0.8); color:white; padding:10px 20px; border-radius:20px; z-index:10001; font-size:12px; pointer-events:none;'; notification.textContent = 'Perspective Reshuffled'; document.body.appendChild(notification); setTimeout(() => notification.remove(), 2000); }); })();
