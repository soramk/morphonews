/**
 * MorphoNews Feature: エージェンティック・フェーズ・トランジション・オーケストラ
 * Generated: 2026-01-24_0945
 * Description: ページのコンテンツ状態の変化やスクロールによる要素の登場を、物質が相転移（Phase Transition）するような滑らかな視覚エフェクトで演出します。情報の断絶を「流体的な変化」として繋ぐことで、高速な情報収集時でも視覚的な安定性を維持します。
 */
(function() { const style = document.createElement('style'); style.textContent = ` .morpho-phase-transition { opacity: 0; transform: translateY(20px) scale(0.98); filter: blur(10px); transition: opacity 0.8s cubic-bezier(0.22, 1, 0.36, 1), transform 0.8s cubic-bezier(0.22, 1, 0.36, 1), filter 0.8s cubic-bezier(0.22, 1, 0.36, 1); will-change: transform, opacity, filter; } .morpho-phase-active { opacity: 1 !important; transform: translateY(0) scale(1) !important; filter: blur(0) !important; } .morpho-portal-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 9999; background: radial-gradient(circle, transparent 20%, rgba(var(--morpho-bg-rgb, 255, 255, 255), 0.5) 100%); mix-blend-mode: soft-light; opacity: 0; transition: opacity 0.5s ease; } .morpho-portal-flashing { opacity: 1; } `; document.head.appendChild(style); const overlay = document.createElement('div'); overlay.className = 'morpho-portal-overlay'; document.body.appendChild(overlay); const observerOptions = { threshold: 0.1, rootMargin: '0px 0px -50px 0px' }; const observer = new IntersectionObserver((entries) => { entries.forEach(entry => { if (entry.isIntersecting) { entry.target.classList.add('morpho-phase-active'); } }); }, observerOptions); const orchestrate = () => { const targets = document.querySelectorAll('article, section, .news-item, h2, h3, .card'); targets.forEach(el => { if (!el.classList.contains('morpho-phase-transition')) { el.classList.add('morpho-phase-transition'); observer.observe(el); } }); }; const triggerFlash = () => { overlay.classList.add('morpho-portal-flashing'); setTimeout(() => overlay.classList.remove('morpho-portal-flashing'), 500); }; orchestrate(); const domObserver = new MutationObserver((mutations) => { mutations.forEach(mutation => { if (mutation.addedNodes.length) { orchestrate(); triggerFlash(); } }); }); domObserver.observe(document.body, { childList: true, subtree: true }); window.addEventListener('scroll', () => { const scrollVelocity = Math.abs(window.scrollY - (window.lastY || 0)); window.lastY = window.scrollY; if (scrollVelocity > 50) { document.documentElement.style.setProperty('--transition-speed', `${Math.min(1.5, scrollVelocity / 100)}s`); } }, { passive: true }); console.log('MorphoNews: Agentic Phase Transition Orchestrator activated.'); })();
