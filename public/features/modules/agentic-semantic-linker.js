/**
 * MorphoNews Feature: エージェンティック・セマンティック・リンカー
 * Generated: 2026-01-17_0118
 * Description: 閲覧中のテキストから主要なキーワードをリアルタイムで抽出し、ページ内の関連セクションを動的に繋ぎ合わせるナビゲーションハブを提供します。実用的な情報の統合と迅速なアクセスを実現します。
 */
(function() { const style = document.createElement('style'); style.textContent = ` #morpho-semantic-hub { position: fixed; bottom: 25px; right: 25px; width: 260px; max-height: 400px; background: rgba(255, 255, 255, 0.92); border: 1px solid #d1d9e6; border-radius: 12px; box-shadow: 0 8px 24px rgba(0,0,0,0.12); z-index: 9999; font-family: 'Segoe UI', sans-serif; overflow: hidden; display: flex; flex-direction: column; backdrop-filter: blur(8px); border-left: 4px solid #4a90e2; transition: all 0.3s ease; } #morpho-semantic-hub:hover { transform: translateY(-5px); box-shadow: 0 12px 30px rgba(0,0,0,0.18); } .morpho-hub-header { padding: 10px 14px; background: #f8fafc; border-bottom: 1px solid #e2e8f0; font-size: 12px; font-weight: bold; color: #475569; display: flex; justify-content: space-between; align-items: center; } .morpho-tag-list { padding: 12px; display: flex; flex-wrap: wrap; gap: 6px; overflow-y: auto; } .morpho-semantic-tag { background: #fff; border: 1px solid #cbd5e1; padding: 4px 10px; border-radius: 16px; font-size: 11px; cursor: pointer; color: #1e293b; transition: all 0.2s; white-space: nowrap; } .morpho-semantic-tag:hover { background: #4a90e2; color: #fff; border-color: #4a90e2; } .morpho-highlight-pulse { animation: morpho-pulse 2s ease-out; } @keyframes morpho-pulse { 0% { background-color: rgba(74, 144, 226, 0.3); } 100% { background-color: transparent; } } `; document.head.appendChild(style); const hub = document.createElement('div'); hub.id = 'morpho-semantic-hub'; hub.innerHTML = ` <div class='morpho-hub-header'> <span>SEMANTIC LINKER</span> <span id='morpho-scan-indicator' style='color:#10b981;'>●</span> </div> <div class='morpho-tag-list' id='morpho-tag-container'></div> `; document.body.appendChild(hub); function extractKeywords() { const bodyText = document.body.innerText; const commonWords = ['これ','それ','あれ','ため','こと','もの','よう','です','ます','した']; const regex = /[\u3040-\u309F\u30A0-\u30FF\u4E00-\u9FFF]{3,8}/g; const matches = bodyText.match(regex) || []; const freqMap = {}; matches.forEach(word => { if (!commonWords.includes(word)) { freqMap[word] = (freqMap[word] || 0) + 1; } }); return Object.entries(freqMap) .sort((a, b) => b[1] - a[1]) .slice(0, 15) .map(entry => entry[0]); } function updateHub() { const container = document.getElementById('morpho-tag-container'); const keywords = extractKeywords(); container.innerHTML = ''; keywords.forEach(word => { const tag = document.createElement('span'); tag.className = 'morpho-semantic-tag'; tag.textContent = word; tag.onclick = () => { const walker = document.createTreeWalker(document.body, NodeFilter.SHOW_TEXT, null, false); let node; while(node = walker.nextNode()) { if (node.textContent.includes(word) && node.parentElement.offsetParent !== null && !node.parentElement.closest('#morpho-semantic-hub')) { node.parentElement.scrollIntoView({ behavior: 'smooth', block: 'center' }); node.parentElement.classList.add('morpho-highlight-pulse'); setTimeout(() => node.parentElement.classList.remove('morpho-highlight-pulse'), 2000); break; } } }; container.appendChild(tag); }); const indicator = document.getElementById('morpho-scan-indicator'); indicator.style.opacity = '0'; setTimeout(() => indicator.style.opacity = '1', 500); } setInterval(updateHub, 8000); updateHub(); })();
