/**
 * MorphoNews Feature: エージェンティック・スペーシャル・トランジション・ネクサス
 * Generated: 2026-01-25_0952
 * Description: スクロール速度と位置に連動してコンテンツを3次元空間内で動的に傾斜・変形させ、情報の切り替わりを「空間の深度」の変化として直感的に表現する、動的な遷移制御インターフェースです。
 */
(function() { const style = document.createElement('style'); style.id = 'astn-style'; style.textContent = ` body { background-color: #050505; perspective: 1200px; } article, section, .news-card, .content-block { transition: transform 0.4s cubic-bezier(0.165, 0.84, 0.44, 1), filter 0.4s, opacity 0.4s; transform-style: preserve-3d; will-change: transform, filter, opacity; margin-bottom: 2rem; position: relative; } .astn-active-transition { pointer-events: none; } `; document.head.appendChild(style); let lastScrollTop = 0; let scrollVelocity = 0; let ticking = false; const updateTransitions = () => { const st = window.pageYOffset || document.documentElement.scrollTop; scrollVelocity = Math.min(Math.abs(st - lastScrollTop), 150); lastScrollTop = st <= 0 ? 0 : st; const elements = document.querySelectorAll('article, section, .news-card, .content-block'); const viewportCenter = window.innerHeight / 2; elements.forEach(el => { const rect = el.getBoundingClientRect(); const elementCenter = rect.top + rect.height / 2; const distanceFromCenter = elementCenter - viewportCenter; const normalizedDistance = Math.max(Math.min(distanceFromCenter / viewportCenter, 1.5), -1.5); const absDistance = Math.abs(normalizedDistance); const tiltAngle = (scrollVelocity * 0.15) * (normalizedDistance > 0 ? 1 : -1); const rotateY = normalizedDistance * 12; const translateZ = -absDistance * 150; const blur = absDistance * 3; const opacity = 1 - (absDistance * 0.4); el.style.transform = `translateZ(${translateZ}px) rotateX(${tiltAngle}deg) rotateY(${rotateY}deg) scale(${1 - absDistance * 0.05})`; el.style.filter = `blur(${blur}px)`; el.style.opacity = opacity.toString(); }); ticking = false; }; window.addEventListener('scroll', () => { if (!ticking) { window.requestAnimationFrame(() => { updateTransitions(); }); ticking = true; } }, { passive: true }); const observer = new MutationObserver(() => { updateTransitions(); }); observer.observe(document.body, { childList: true, subtree: true }); setTimeout(updateTransitions, 100); })();
