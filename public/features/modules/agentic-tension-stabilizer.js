/**
 * MorphoNews Feature: エージェンティック・テンション・スタビライザー
 * Generated: 2026-01-16_1002
 * Description: ニュースカテゴリー間の関連性を物理的な張力（テンション）として可視化し、情報の統合度をユーザーが動的に操作できるインターフェース。ノードを近づけることで関連情報の密度を高め、遠ざけることで情報の独立性を確保します。
 */
(function() { const style = document.createElement('style'); style.textContent = ` #ts-widget { position: fixed; bottom: 20px; right: 20px; width: 260px; height: 320px; background: rgba(10, 10, 15, 0.9); border: 1px solid #3a3a4a; border-radius: 16px; color: #fff; font-family: 'Inter', sans-serif; z-index: 10000; box-shadow: 0 12px 40px rgba(0,0,0,0.6); overflow: hidden; display: flex; flex-direction: column; transition: transform 0.3s ease; backdrop-filter: blur(8px); } #ts-widget.collapsed { transform: translateY(280px); } .ts-header { padding: 12px; background: #1a1a2e; font-size: 11px; font-weight: bold; text-transform: uppercase; letter-spacing: 1px; cursor: pointer; display: flex; justify-content: space-between; border-bottom: 1px solid #333; } .ts-canvas-container { flex-grow: 1; position: relative; background: radial-gradient(circle at center, #1a1a2e 0%, #0a0a0f 100%); touch-action: none; overflow: hidden; } .ts-node { position: absolute; width: 44px; height: 44px; border-radius: 50%; background: #222; border: 2px solid #4a90e2; display: flex; align-items: center; justify-content: center; font-size: 9px; cursor: grab; user-select: none; box-shadow: 0 0 15px rgba(74, 144, 226, 0.3); transition: box-shadow 0.2s; } .ts-node:active { cursor: grabbing; box-shadow: 0 0 25px rgba(74, 144, 226, 0.6); } .ts-link { position: absolute; background: rgba(74, 144, 226, 0.2); height: 1px; transform-origin: 0 50%; pointer-events: none; } .ts-status { padding: 8px; font-size: 10px; color: #888; border-top: 1px solid #333; } `; document.head.appendChild(style); const widget = document.createElement('div'); widget.id = 'ts-widget'; widget.innerHTML = ` <div class='ts-header'> <span>Tensioned Integration</span> <span id='ts-toggle'>▼</span> </div> <div class='ts-canvas-container' id='ts-canvas'></div> <div class='ts-status' id='ts-info'>Adjusting content synergy...</div> `; document.body.appendChild(widget); const canvas = document.getElementById('ts-canvas'); const toggle = document.querySelector('.ts-header'); toggle.onclick = () => widget.classList.toggle('collapsed'); const topics = ['POLITICS', 'TECH', 'BIZ', 'CULTURE']; const nodes = topics.map((label, i) => ({ id: label, x: 50 + Math.random() * 150, y: 50 + Math.random() * 150, vx: 0, vy: 0, el: null })); nodes.forEach(node => { const div = document.createElement('div'); div.className = 'ts-node'; div.innerText = node.id; canvas.appendChild(div); node.el = div; let isDragging = false; div.onmousedown = (e) => { isDragging = true; node.vx = 0; node.vy = 0; }; window.onmousemove = (e) => { if (isDragging) { const rect = canvas.getBoundingClientRect(); node.x = e.clientX - rect.left - 22; node.y = e.clientY - rect.top - 22; } }; window.onmouseup = () => { isDragging = false; }; }); const links = []; for(let i=0; i<nodes.length; i++) { for(let j=i+1; j<nodes.length; j++) { const line = document.createElement('div'); line.className = 'ts-link'; canvas.appendChild(line); links.push({ a: nodes[i], b: nodes[j], el: line }); } } function updatePhysics() { const k = 0.05; const damp = 0.9; const targetDist = 100; nodes.forEach((node, i) => { nodes.forEach((other, j) => { if (i === j) return; const dx = other.x - node.x; const dy = other.y - node.y; const dist = Math.sqrt(dx*dx + dy*dy) || 1; const force = (dist - targetDist) * k; node.vx += (dx / dist) * force * 0.1; node.vy += (dy / dist) * force * 0.1; }); node.vx *= damp; node.vy *= damp; node.x += node.vx; node.y += node.vy; node.x = Math.max(0, Math.min(216, node.x)); node.y = Math.max(0, Math.min(216, node.y)); node.el.style.transform = `translate(${node.x}px, ${node.y}px)`; }); links.forEach(link => { const dx = link.b.x - link.a.x; const dy = link.b.y - link.a.y; const dist = Math.sqrt(dx*dx + dy*dy); const angle = Math.atan2(dy, dx) * 180 / Math.PI; link.el.style.width = `${dist}px`; link.el.style.transform = `translate(${link.a.x + 22}px, ${link.a.y + 22}px) rotate(${angle}deg)`; }); const avgDist = links.reduce((acc, l) => acc + Math.sqrt((l.a.x-l.b.x)**2 + (l.a.y-l.b.y)**2), 0) / links.length; const integration = Math.max(0, 100 - (avgDist / 2)).toFixed(1); document.getElementById('ts-info').innerText = `Integration Density: ${integration}%`; const articles = document.querySelectorAll('article, .news-item'); if(articles.length > 0) { articles.forEach(art => { art.style.filter = `contrast(${0.8 + (integration/200)}) brightness(${0.9 + (integration/500)})`; art.style.transition = 'filter 0.5s ease'; }); } requestAnimationFrame(updatePhysics); } updatePhysics(); })();
