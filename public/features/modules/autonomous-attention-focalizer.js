/**
 * MorphoNews Feature: 自律的アテンション・フォーカライザー
 * Generated: 2026-01-13_0958
 * Description: ユーザーの視覚的停留時間とスクロール行動を学習し、関心が高いと思われるセクションを自動的に強調（ハイライト）し、周囲の視覚的ノイズを動的に低減する機能です。
 */
(function() { const style = document.createElement('style'); style.textContent = '.morpho-focus-target { transition: all 0.7s cubic-bezier(0.2, 0, 0.2, 1); position: relative; } .morpho-dimmed { opacity: 0.3; filter: grayscale(0.8) blur(1px); transform: scale(0.98); pointer-events: none; } .morpho-highlight { opacity: 1; filter: grayscale(0) blur(0); transform: scale(1.03); z-index: 100; box-shadow: 0 10px 30px rgba(0,0,0,0.1); } .focus-status { position: fixed; bottom: 10px; right: 10px; font-size: 10px; color: #888; pointer-events: none; }'; document.head.appendChild(style); const targets = document.querySelectorAll('article, section, .news-item, p'); if (targets.length === 0) return; const scores = new Map(); let currentActive = null; targets.forEach(el => { el.classList.add('morpho-focus-target'); scores.set(el, 0); }); const updateDisplay = () => { let bestCandidate = null; let maxScore = -1; scores.forEach((score, el) => { if (score > maxScore) { maxScore = score; bestCandidate = el; } }); if (bestCandidate && bestCandidate !== currentActive && maxScore > 0.5) { targets.forEach(el => { if (el === bestCandidate) { el.classList.remove('morpho-dimmed'); el.classList.add('morpho-highlight'); } else { el.classList.remove('morpho-highlight'); el.classList.add('morpho-dimmed'); } }); currentActive = bestCandidate; } }; const observer = new IntersectionObserver((entries) => { entries.forEach(entry => { if (entry.isIntersecting) { const current = scores.get(entry.target) || 0; scores.set(entry.target, current + entry.intersectionRatio); updateDisplay(); } }); }, { threshold: [0.1, 0.5, 0.9] }); targets.forEach(t => { observer.observe(t); t.addEventListener('mouseenter', () => { scores.set(t, (scores.get(t) || 0) + 2); updateDisplay(); }); }); setInterval(() => { scores.forEach((score, el) => { if (score > 0) scores.set(el, score * 0.85); }); if (currentActive && (scores.get(currentActive) || 0) < 0.2) { targets.forEach(el => { el.classList.remove('morpho-dimmed', 'morpho-highlight'); }); currentActive = null; } }, 4000); })();
